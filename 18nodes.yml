version: "3.4"

x-rnode: &default-rnode
  image: nuttzipper/rnode:bm
  user: root
  mem_limit: 16g
  networks:
    - rchain-net
  environment:
    # Keyfiles are generated using `rnode keygen` with this password
    - RNODE_VALIDATOR_PASSWORD=123

services:
  boot:
    <<: *default-rnode
    container_name: $BOOTSTRAP_HOST
    command:
      [
        "run",
        "--host=$BOOTSTRAP_HOST",
        "--dev-mode",
        "--autopropose",
        "--deployer-private-key=23bf9c149eda545a177666aca2d598026c241c3b33905a7058450370f57f9ee8",
        "--synchrony-constraint-threshold=$SYNCHRONY_CONSTRAINT_THRESHOLD",
        "-Dlogback.configurationFile=/var/lib/rnode/logback.xml"
      ]
    ports:
      - 40400:40400
      - 40401:40401
      - 40402:40402
      - 40403:40403
      - 40404:40404
    volumes:
      - ./data/$BOOTSTRAP_HOST:/var/lib/rnode/
      - ./genesis/wallets18.txt:/var/lib/rnode/genesis/wallets.txt
      - ./genesis/bonds18.txt:/var/lib/rnode/genesis/bonds.txt
      - ./conf/bootstrap/bootstrap.conf:/var/lib/rnode/rnode.conf
      - ./conf/bootstrap/rnode.key:/var/lib/rnode/rnode.key
      - ./conf/bootstrap/node.key.pem:/var/lib/rnode/node.key.pem
      - ./conf/bootstrap/node.certificate.pem:/var/lib/rnode/node.certificate.pem
      - ./conf/logback.xml:/var/lib/rnode/logback.xml

  validator1:
    <<: *default-rnode
    container_name: $VALIDATOR1_HOST
    command:
      [
        "run",
        "--bootstrap=rnode://cf2f66e6b6955f5c2f0edff54ecdfdd142a55763@$BOOTSTRAP_HOST?protocol=40400&discovery=40404",
        "--host=$VALIDATOR1_HOST",
        "--dev-mode",
        "--autopropose",
        "--deployer-private-key=817fd830f9fd0c48d525867f9a67a4858c589688ce1ab18e48ff094e768383d4",
        "--synchrony-constraint-threshold=$SYNCHRONY_CONSTRAINT_THRESHOLD",
        "-Dlogback.configurationFile=/var/lib/rnode/logback.xml"
      ]
    ports:
      - 50400:40400
      - 50401:40401
      - 50402:40402
      - 50403:40403
      - 50404:40404
    volumes:
      - ./data/$VALIDATOR1_HOST:/var/lib/rnode/
      - ./genesis/wallets18.txt:/var/lib/rnode/genesis/wallets.txt
      - ./genesis/bonds18.txt:/var/lib/rnode/genesis/bonds.txt
      - ./conf/validator1/validator1.conf:/var/lib/rnode/rnode.conf
      - ./conf/validator1/rnode.key:/var/lib/rnode/rnode.key
      - ./conf/logback.xml:/var/lib/rnode/logback.xml

  validator2:
    <<: *default-rnode
    container_name: $VALIDATOR2_HOST
    command:
      [
        "run",
        "--bootstrap=rnode://cf2f66e6b6955f5c2f0edff54ecdfdd142a55763@$BOOTSTRAP_HOST?protocol=40400&discovery=40404",
        "--host=$VALIDATOR2_HOST",
        "--dev-mode",
        "--autopropose",
        "--deployer-private-key=ec695ec18b6263f905eba395b33ffb26de5529fefd596f7ce485ba947a72c783",
        "--synchrony-constraint-threshold=$SYNCHRONY_CONSTRAINT_THRESHOLD",
        "-Dlogback.configurationFile=/var/lib/rnode/logback.xml"
      ]
    ports:
      - 60400:40400
      - 60401:40401
      - 60402:40402
      - 60403:40403
      - 60404:40404
    volumes:
      - ./data/$VALIDATOR2_HOST:/var/lib/rnode/
      - ./genesis/wallets18.txt:/var/lib/rnode/genesis/wallets.txt
      - ./genesis/bonds18.txt:/var/lib/rnode/genesis/bonds.txt
      - ./conf/validator2/validator2.conf:/var/lib/rnode/rnode.conf
      - ./conf/validator2/rnode.key:/var/lib/rnode/rnode.key
      - ./conf/logback.xml:/var/lib/rnode/logback.xml

  validator3:
    <<: *default-rnode
    container_name: $VALIDATOR3_HOST
    command:
      [
        "run",
        "--bootstrap=rnode://cf2f66e6b6955f5c2f0edff54ecdfdd142a55763@$BOOTSTRAP_HOST?protocol=40400&discovery=40404",
        "--host=$VALIDATOR3_HOST",
        "--dev-mode",
        "--autopropose",
        "--deployer-private-key=77c9dd956d894b96ba16cc4d61e9be005f0a6d8e47ec315d5b14039d67dcc21f",
        "--synchrony-constraint-threshold=$SYNCHRONY_CONSTRAINT_THRESHOLD",
        "-Dlogback.configurationFile=/var/lib/rnode/logback.xml"
      ]
    ports:
      - 51400:40400
      - 51401:40401
      - 51402:40402
      - 51403:40403
      - 51404:40404
    volumes:
      - ./data/$VALIDATOR3_HOST:/var/lib/rnode/
      - ./genesis/wallets18.txt:/var/lib/rnode/genesis/wallets.txt
      - ./genesis/bonds18.txt:/var/lib/rnode/genesis/bonds.txt
      - ./conf/validator3/validator3.conf:/var/lib/rnode/rnode.conf
      - ./conf/validator3/rnode.key:/var/lib/rnode/rnode.key
      - ./conf/logback.xml:/var/lib/rnode/logback.xml

  validator4:
    <<: *default-rnode
    container_name: $VALIDATOR4_HOST
    command:
      [
        "run",
        "--bootstrap=rnode://cf2f66e6b6955f5c2f0edff54ecdfdd142a55763@$BOOTSTRAP_HOST?protocol=40400&discovery=40404",
        "--host=$VALIDATOR4_HOST",
        "--dev-mode",
        "--autopropose",
        "--deployer-private-key=d6f135c27e1c3e2217536239f99452030fb5a15d19deac51ecff1cf342131e73",
        "--synchrony-constraint-threshold=$SYNCHRONY_CONSTRAINT_THRESHOLD",
        "-Dlogback.configurationFile=/var/lib/rnode/logback.xml"
      ]
    ports:
      - 52400:40400
      - 52401:40401
      - 52402:40402
      - 52403:40403
      - 52404:40404
    volumes:
      - ./data/$VALIDATOR4_HOST:/var/lib/rnode/
      - ./genesis/wallets18.txt:/var/lib/rnode/genesis/wallets.txt
      - ./genesis/bonds18.txt:/var/lib/rnode/genesis/bonds.txt
      - ./conf/validator4/validator4.conf:/var/lib/rnode/rnode.conf
      - ./conf/validator4/rnode.key:/var/lib/rnode/rnode.key
      - ./conf/logback.xml:/var/lib/rnode/logback.xml

  validator5:
    <<: *default-rnode
    container_name: $VALIDATOR5_HOST
    command:
      [
        "run",
        "--bootstrap=rnode://cf2f66e6b6955f5c2f0edff54ecdfdd142a55763@$BOOTSTRAP_HOST?protocol=40400&discovery=40404",
        "--host=$VALIDATOR5_HOST",
        "--dev-mode",
        "--autopropose",
        "--deployer-private-key=4a07f4675ead308908e2369d61d12d5ed9d0a291ff001c02606212ae81670c0a",
        "--synchrony-constraint-threshold=$SYNCHRONY_CONSTRAINT_THRESHOLD",
        "-Dlogback.configurationFile=/var/lib/rnode/logback.xml"
      ]
    ports:
      - 53400:40400
      - 53401:40401
      - 53402:40402
      - 53403:40403
      - 53404:40404
    volumes:
      - ./data/$VALIDATOR5_HOST:/var/lib/rnode/
      - ./genesis/wallets18.txt:/var/lib/rnode/genesis/wallets.txt
      - ./genesis/bonds18.txt:/var/lib/rnode/genesis/bonds.txt
      - ./conf/validator5/validator5.conf:/var/lib/rnode/rnode.conf
      - ./conf/validator5/rnode.key:/var/lib/rnode/rnode.key
      - ./conf/logback.xml:/var/lib/rnode/logback.xml

  validator6:
    <<: *default-rnode
    container_name: $VALIDATOR6_HOST
    command:
      [
        "run",
        "--bootstrap=rnode://cf2f66e6b6955f5c2f0edff54ecdfdd142a55763@$BOOTSTRAP_HOST?protocol=40400&discovery=40404",
        "--host=$VALIDATOR6_HOST",
        "--dev-mode",
        "--autopropose",
        "--deployer-private-key=e95e35bf651a08fdd4fb9615631b5c99d67c20d0a0f0917f36a88319b78923d8",
        "--synchrony-constraint-threshold=$SYNCHRONY_CONSTRAINT_THRESHOLD",
        "-Dlogback.configurationFile=/var/lib/rnode/logback.xml"
      ]
    ports:
      - 54400:40400
      - 54401:40401
      - 54402:40402
      - 54403:40403
      - 54404:40404
    volumes:
      - ./data/$VALIDATOR6_HOST:/var/lib/rnode/
      - ./genesis/wallets18.txt:/var/lib/rnode/genesis/wallets.txt
      - ./genesis/bonds18.txt:/var/lib/rnode/genesis/bonds.txt
      - ./conf/validator6/validator6.conf:/var/lib/rnode/rnode.conf
      - ./conf/validator6/rnode.key:/var/lib/rnode/rnode.key
      - ./conf/logback.xml:/var/lib/rnode/logback.xml

  validator7:
    <<: *default-rnode
    container_name: $VALIDATOR7_HOST
    command:
      [
        "run",
        "--bootstrap=rnode://cf2f66e6b6955f5c2f0edff54ecdfdd142a55763@$BOOTSTRAP_HOST?protocol=40400&discovery=40404",
        "--host=$VALIDATOR7_HOST",
        "--dev-mode",
        "--autopropose",
        "--deployer-private-key=ddf6e7c3f3a488344caeb2939d3d50ddb9ac35c8aebdee007a3069c111e4453d",
        "--synchrony-constraint-threshold=$SYNCHRONY_CONSTRAINT_THRESHOLD",
        "-Dlogback.configurationFile=/var/lib/rnode/logback.xml"
      ]
    ports:
      - 55400:40400
      - 55401:40401
      - 55402:40402
      - 55403:40403
      - 55404:40404
    volumes:
      - ./data/$VALIDATOR7_HOST:/var/lib/rnode/
      - ./genesis/wallets18.txt:/var/lib/rnode/genesis/wallets.txt
      - ./genesis/bonds18.txt:/var/lib/rnode/genesis/bonds.txt
      - ./conf/validator7/validator7.conf:/var/lib/rnode/rnode.conf
      - ./conf/validator7/rnode.key:/var/lib/rnode/rnode.key
      - ./conf/logback.xml:/var/lib/rnode/logback.xml

  validator8:
    <<: *default-rnode
    container_name: $VALIDATOR8_HOST
    command:
      [
        "run",
        "--bootstrap=rnode://cf2f66e6b6955f5c2f0edff54ecdfdd142a55763@$BOOTSTRAP_HOST?protocol=40400&discovery=40404",
        "--host=$VALIDATOR8_HOST",
        "--dev-mode",
        "--autopropose",
        "--deployer-private-key=75934290a21d14701f9f595a2589c85731738a5776024f539b3ca5f11163c8c2",
        "--synchrony-constraint-threshold=$SYNCHRONY_CONSTRAINT_THRESHOLD",
        "-Dlogback.configurationFile=/var/lib/rnode/logback.xml"
      ]
    ports:
      - 56400:40400
      - 56401:40401
      - 56402:40402
      - 56403:40403
      - 56404:40404
    volumes:
      - ./data/$VALIDATOR8_HOST:/var/lib/rnode/
      - ./genesis/wallets18.txt:/var/lib/rnode/genesis/wallets.txt
      - ./genesis/bonds18.txt:/var/lib/rnode/genesis/bonds.txt
      - ./conf/validator8/validator8.conf:/var/lib/rnode/rnode.conf
      - ./conf/validator8/rnode.key:/var/lib/rnode/rnode.key
      - ./conf/logback.xml:/var/lib/rnode/logback.xml

  validator9:
    <<: *default-rnode
    container_name: $VALIDATOR9_HOST
    command:
      [
        "run",
        "--bootstrap=rnode://cf2f66e6b6955f5c2f0edff54ecdfdd142a55763@$BOOTSTRAP_HOST?protocol=40400&discovery=40404",
        "--host=$VALIDATOR9_HOST",
        "--dev-mode",
        "--autopropose",
        "--deployer-private-key=4c24ff8c5c7ac928c563932554b0c8695ab1ffdca93aaf82347e128743a4423f",
        "--synchrony-constraint-threshold=$SYNCHRONY_CONSTRAINT_THRESHOLD",
        "-Dlogback.configurationFile=/var/lib/rnode/logback.xml"
      ]
    ports:
      - 57400:40400
      - 57401:40401
      - 57402:40402
      - 57403:40403
      - 57404:40404
    volumes:
      - ./data/$VALIDATOR9_HOST:/var/lib/rnode/
      - ./genesis/wallets18.txt:/var/lib/rnode/genesis/wallets.txt
      - ./genesis/bonds18.txt:/var/lib/rnode/genesis/bonds.txt
      - ./conf/validator9/validator9.conf:/var/lib/rnode/rnode.conf
      - ./conf/validator9/rnode.key:/var/lib/rnode/rnode.key
      - ./conf/logback.xml:/var/lib/rnode/logback.xml

  validator10:
    <<: *default-rnode
    container_name: $VALIDATOR10_HOST
    command:
      [
        "run",
        "--bootstrap=rnode://cf2f66e6b6955f5c2f0edff54ecdfdd142a55763@$BOOTSTRAP_HOST?protocol=40400&discovery=40404",
        "--host=$VALIDATOR10_HOST",
        "--dev-mode",
        "--autopropose",
        "--deployer-private-key=f8edcf97cead925c4ec5629ce207206340892b1081f0a370684978f7cd79a9e6",
        "--synchrony-constraint-threshold=$SYNCHRONY_CONSTRAINT_THRESHOLD",
        "-Dlogback.configurationFile=/var/lib/rnode/logback.xml"
      ]
    ports:
      - 58400:40400
      - 58401:40401
      - 58402:40402
      - 58403:40403
      - 58404:40404
    volumes:
      - ./data/$VALIDATOR10_HOST:/var/lib/rnode/
      - ./genesis/wallets18.txt:/var/lib/rnode/genesis/wallets.txt
      - ./genesis/bonds18.txt:/var/lib/rnode/genesis/bonds.txt
      - ./conf/validator10/validator10.conf:/var/lib/rnode/rnode.conf
      - ./conf/validator10/rnode.key:/var/lib/rnode/rnode.key
      - ./conf/logback.xml:/var/lib/rnode/logback.xml

  validator11:
    <<: *default-rnode
    container_name: $VALIDATOR11_HOST
    command:
      [
        "run",
        "--bootstrap=rnode://cf2f66e6b6955f5c2f0edff54ecdfdd142a55763@$BOOTSTRAP_HOST?protocol=40400&discovery=40404",
        "--host=$VALIDATOR11_HOST",
        "--dev-mode",
        "--autopropose",
        "--deployer-private-key=899f2990589ddf11dc5fb618511644c3744eafe35bc8cd6129c5802b805a34b5",
        "--synchrony-constraint-threshold=$SYNCHRONY_CONSTRAINT_THRESHOLD",
        "-Dlogback.configurationFile=/var/lib/rnode/logback.xml"
      ]
    ports:
      - 59400:40400
      - 59401:40401
      - 59402:40402
      - 59403:40403
      - 59404:40404
    volumes:
      - ./data/$VALIDATOR11_HOST:/var/lib/rnode/
      - ./genesis/wallets18.txt:/var/lib/rnode/genesis/wallets.txt
      - ./genesis/bonds18.txt:/var/lib/rnode/genesis/bonds.txt
      - ./conf/validator11/validator11.conf:/var/lib/rnode/rnode.conf
      - ./conf/validator11/rnode.key:/var/lib/rnode/rnode.key
      - ./conf/logback.xml:/var/lib/rnode/logback.xml

  validator12:
    <<: *default-rnode
    container_name: $VALIDATOR12_HOST
    command:
      [
        "run",
        "--bootstrap=rnode://cf2f66e6b6955f5c2f0edff54ecdfdd142a55763@$BOOTSTRAP_HOST?protocol=40400&discovery=40404",
        "--host=$VALIDATOR12_HOST",
        "--dev-mode",
        "--autopropose",
        "--deployer-private-key=adb96f229c2c5bc2de7584e93931acf6a64eeed63b0c9e7ea647c4f1a4865aa7",
        "--synchrony-constraint-threshold=$SYNCHRONY_CONSTRAINT_THRESHOLD",
        "-Dlogback.configurationFile=/var/lib/rnode/logback.xml"
      ]
    ports:
      - 61400:40400
      - 61401:40401
      - 61402:40402
      - 61403:40403
      - 61404:40404
    volumes:
      - ./data/$VALIDATOR12_HOST:/var/lib/rnode/
      - ./genesis/wallets18.txt:/var/lib/rnode/genesis/wallets.txt
      - ./genesis/bonds18.txt:/var/lib/rnode/genesis/bonds.txt
      - ./conf/validator12/validator12.conf:/var/lib/rnode/rnode.conf
      - ./conf/validator12/rnode.key:/var/lib/rnode/rnode.key
      - ./conf/logback.xml:/var/lib/rnode/logback.xml

  validator13:
    <<: *default-rnode
    container_name: $VALIDATOR13_HOST
    command:
      [
        "run",
        "--bootstrap=rnode://cf2f66e6b6955f5c2f0edff54ecdfdd142a55763@$BOOTSTRAP_HOST?protocol=40400&discovery=40404",
        "--host=$VALIDATOR13_HOST",
        "--dev-mode",
        "--autopropose",
        "--deployer-private-key=5cfc00779dba7c1e69d992b7f15cdbf66224ce16e435e64f3b212e481f712067",
        "--synchrony-constraint-threshold=$SYNCHRONY_CONSTRAINT_THRESHOLD",
        "-Dlogback.configurationFile=/var/lib/rnode/logback.xml"
      ]
    ports:
      - 51500:40400
      - 51501:40401
      - 51502:40402
      - 51503:40403
      - 51504:40404
    volumes:
      - ./data/$VALIDATOR13_HOST:/var/lib/rnode/
      - ./genesis/wallets18.txt:/var/lib/rnode/genesis/wallets.txt
      - ./genesis/bonds18.txt:/var/lib/rnode/genesis/bonds.txt
      - ./conf/validator13/validator13.conf:/var/lib/rnode/rnode.conf
      - ./conf/validator13/rnode.key:/var/lib/rnode/rnode.key
      - ./conf/logback.xml:/var/lib/rnode/logback.xml

  validator14:
    <<: *default-rnode
    container_name: $VALIDATOR14_HOST
    command:
      [
        "run",
        "--bootstrap=rnode://cf2f66e6b6955f5c2f0edff54ecdfdd142a55763@$BOOTSTRAP_HOST?protocol=40400&discovery=40404",
        "--host=$VALIDATOR14_HOST",
        "--dev-mode",
        "--autopropose",
        "--deployer-private-key=4f5c63aea4eecbbaabe7d029ea4da83a3a971b2f74e09f901d71427e620008ca",
        "--synchrony-constraint-threshold=$SYNCHRONY_CONSTRAINT_THRESHOLD",
        "-Dlogback.configurationFile=/var/lib/rnode/logback.xml"
      ]
    ports:
      - 52500:40400
      - 52501:40401
      - 52502:40402
      - 52503:40403
      - 52504:40404
    volumes:
      - ./data/$VALIDATOR14_HOST:/var/lib/rnode/
      - ./genesis/wallets18.txt:/var/lib/rnode/genesis/wallets.txt
      - ./genesis/bonds18.txt:/var/lib/rnode/genesis/bonds.txt
      - ./conf/validator14/validator14.conf:/var/lib/rnode/rnode.conf
      - ./conf/validator14/rnode.key:/var/lib/rnode/rnode.key
      - ./conf/logback.xml:/var/lib/rnode/logback.xml

  validator15:
    <<: *default-rnode
    container_name: $VALIDATOR15_HOST
    command:
      [
        "run",
        "--bootstrap=rnode://cf2f66e6b6955f5c2f0edff54ecdfdd142a55763@$BOOTSTRAP_HOST?protocol=40400&discovery=40404",
        "--host=$VALIDATOR15_HOST",
        "--dev-mode",
        "--autopropose",
        "--deployer-private-key=2fc8577d955a806230a2edcd697b642a4a0562d1935a0aacbdebd72c458b1d28",
        "--synchrony-constraint-threshold=$SYNCHRONY_CONSTRAINT_THRESHOLD",
        "-Dlogback.configurationFile=/var/lib/rnode/logback.xml"
      ]
    ports:
      - 52600:40400
      - 52601:40401
      - 52602:40402
      - 52603:40403
      - 52604:40404
    volumes:
      - ./data/$VALIDATOR15_HOST:/var/lib/rnode/
      - ./genesis/wallets18.txt:/var/lib/rnode/genesis/wallets.txt
      - ./genesis/bonds18.txt:/var/lib/rnode/genesis/bonds.txt
      - ./conf/validator15/validator15.conf:/var/lib/rnode/rnode.conf
      - ./conf/validator15/rnode.key:/var/lib/rnode/rnode.key
      - ./conf/logback.xml:/var/lib/rnode/logback.xml

  validator16:
    <<: *default-rnode
    container_name: $VALIDATOR16_HOST
    command:
      [
        "run",
        "--bootstrap=rnode://cf2f66e6b6955f5c2f0edff54ecdfdd142a55763@$BOOTSTRAP_HOST?protocol=40400&discovery=40404",
        "--host=$VALIDATOR16_HOST",
        "--dev-mode",
        "--autopropose",
        "--deployer-private-key=1630460d787a8c2384105261c84a7e8b33487882abc1e556e3aff36a941f02eb",
        "--synchrony-constraint-threshold=$SYNCHRONY_CONSTRAINT_THRESHOLD",
        "-Dlogback.configurationFile=/var/lib/rnode/logback.xml"
      ]
    ports:
      - 52700:40400
      - 52701:40401
      - 52702:40402
      - 52703:40403
      - 52704:40404
    volumes:
      - ./data/$VALIDATOR16_HOST:/var/lib/rnode/
      - ./genesis/wallets18.txt:/var/lib/rnode/genesis/wallets.txt
      - ./genesis/bonds18.txt:/var/lib/rnode/genesis/bonds.txt
      - ./conf/validator16/validator16.conf:/var/lib/rnode/rnode.conf
      - ./conf/validator16/rnode.key:/var/lib/rnode/rnode.key
      - ./conf/logback.xml:/var/lib/rnode/logback.xml

  validator17:
    <<: *default-rnode
    container_name: $VALIDATOR17_HOST
    command:
      [
        "run",
        "--bootstrap=rnode://cf2f66e6b6955f5c2f0edff54ecdfdd142a55763@$BOOTSTRAP_HOST?protocol=40400&discovery=40404",
        "--host=$VALIDATOR17_HOST",
        "--dev-mode",
        "--autopropose",
        "--deployer-private-key=93c6311f3c0b0506b02e71dd26307db216c1d7ee4a10fd17a36e5b273faf6771",
        "--synchrony-constraint-threshold=$SYNCHRONY_CONSTRAINT_THRESHOLD",
        "-Dlogback.configurationFile=/var/lib/rnode/logback.xml"
      ]
    ports:
      - 52800:40400
      - 52801:40401
      - 52802:40402
      - 52803:40403
      - 52804:40404
    volumes:
      - ./data/$VALIDATOR17_HOST:/var/lib/rnode/
      - ./genesis/wallets18.txt:/var/lib/rnode/genesis/wallets.txt
      - ./genesis/bonds18.txt:/var/lib/rnode/genesis/bonds.txt
      - ./conf/validator17/validator17.conf:/var/lib/rnode/rnode.conf
      - ./conf/validator17/rnode.key:/var/lib/rnode/rnode.key
      - ./conf/logback.xml:/var/lib/rnode/logback.xml

networks:
  rchain-net:
